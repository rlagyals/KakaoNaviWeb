<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js"
  integrity="sha384-TiCUE00h649CAMonG018J2ujOgDKW/kVWlChEuu4jK2vxfAAD0eZxzCKakxg55G4" crossorigin="anonymous"></script>
<script>
  Kakao.init('cfac1bb447931c69251494aeb4793527'); // 사용하려는 앱의 JavaScript 키 입력

  // URL 파라미터를 가져오는 함수
  function getQueryParams() {
    const params = new URLSearchParams(window.location.search);
    return {
      name0: params.get('name0'),
      x0: params.get('x0'),
      y0: params.get('y0'),
      name1: params.get('name1'),
      x1: params.get('x1'),
      y1: params.get('y1'),
      name2: params.get('name2'),
      x2: params.get('x2'),
      y2: params.get('y2'),
      name3: params.get('name3'),
      x3: params.get('x3'),
      y3: params.get('y3')
    };
  }

  // 카카오 네비게이션 초기화 및 시작
  function startNavigation() {
    const { name0, x0, y0, name1, x1, y1, name2, x2, y2, name3, x3, y3 } = getQueryParams();

    const viaPoints = [];
    if (name0 && x0 && y0 && name0 !== 'undefined' && x0 !== 'undefined' && y0 !== 'undefined') {
        viaPoints.push({ name: name0, x: parseFloat(x0), y: parseFloat(y0) });
    }
    if (name1 && x1 && y1 && name1 !== 'undefined' && x1 !== 'undefined' && y1 !== 'undefined') {
        viaPoints.push({ name: name1, x: parseFloat(x1), y: parseFloat(y1) });
    }
    if (name2 && x2 && y2 && name2 !== 'undefined' && x2 !== 'undefined' && y2 !== 'undefined') {
        viaPoints.push({ name: name2, x: parseFloat(x2), y: parseFloat(y2) });
    }

    Kakao.Navi.start({
      name: name3,
      x: parseFloat(x3),
      y: parseFloat(y3),
      coordType: 'wgs84',
      viaPoints: viaPoints, // 경유지 추가
    });
  }

  // 페이지가 로드될 때 자동으로 네비게이션 시작
  window.onload = startNavigation;
</script>


